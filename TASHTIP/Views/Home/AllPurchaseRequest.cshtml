@model IEnumerable<TASHTIP.EF.ViewModel.Production.ProjectFinishVM>


@{
    ViewData["Title"] = "All Purchase Request";
}


<style>
    

    .margin-top {
        margin-top: 120px;
    }

    .margin-bottom {
        margin-top: 30px;
    }

    .dropdown .icon {
        visibility: hidden;
    }
</style>



<div class="container margin-top">
    <div class="row mb-5">
        <div class="col-md-4">
            <div class="  shadow-lg p-3  rounded" style="width:271px; text-align:center">
                <h2>  <i style="font-size:50px" class="object ungroup outline icon"></i> طلبات الشراء</h2>
            </div>
        </div>

    </div>


    <table id="myTable" class="table table-striped table-bordered dt-Responsive nowrap   cell-border compact stripe" style="width:100%">
        <thead>
            <tr>
                <th>
                    رقم
                </th>
                <th>
                    العميل
                </th>
                <th>
                    تاريخ الطلب
                </th>
                <th>
                    الوحده
                </th>
                <th>
                    المدينه
                </th>
                <th>
                    السعر
                </th>
                <th>
                    
                </th>
            </tr>
        </thead>
        <tbody>
        @foreach (var item in Model)
        {
        <tr>
                    <td class="font-weight-bold">
                        @item.PurchaseRequest.Select(c=>c.ID_PR).FirstOrDefault()
                    </td>
                    <td class="font-weight-bold">
                        @item.PurchaseRequest.Select(c=>c.CutomerName).FirstOrDefault()
                     </td>
                    <td class="font-weight-bold">
                        @item.PurchaseRequest.Select(c=>c.RequestDate).FirstOrDefault()
                    </td>
                    <td class="font-weight-bold">
                        @item.BussinessGallary.Select(c=>c.ServicesName).FirstOrDefault()
                    </td>
                    <td class="font-weight-bold">
                        @item.BussinessGallary.Select(c=>c.City ).FirstOrDefault()
                    </td>
                    <td class="font-weight-bold">
                        @item.BussinessGallary.Select(c=>c.Price  ).FirstOrDefault()
                    </td>
                    <td class="font-weight-bold">
                        <a asp-action="DetialsPurchaseRequest" class="ui button circular mini primary" asp-controller="Home" asp-route-id="@item.PurchaseRequest.Select(c=>c.ID_PR).FirstOrDefault()">تفاصيل</a>
                    </td>
        </tr>
        }
        </tbody>
    </table>
</div>



@section Scripts {

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }


    <script type="text/javascript">

        let table = new DataTable('#myTable');

        $(document).ready(function () {

            table.on('click', 'tbody tr', (e) => {
                let classList = e.currentTarget.classList;
                if (classList.contains('selected')) {
                    classList.remove('selected');
                } else {
                    table.rows('.selected').nodes().each((row) => row.classList.remove('selected'));
                    classList.add('selected');
                }
            });
        });
    </script>
}


